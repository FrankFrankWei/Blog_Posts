title: 目标-动作模式
tags: ios, target-action, 目标-动作模式
categories: ios, 自译自乐
---
#目标-动作模式
>译自[Target-Action](https://developer.apple.com/library/ios/documentation/general/conceptual/devpedia-cocoaapp/targetaction.html)

目标-动作模式是一种当一个事件发生时一对象持有发送给另一对象的消息的必要信息的设计模式。
~~目标-动作模式是一种当一个事件发生时一对象持有一些必要信息作为消息发送给另一对象的设计模式。~~
必要信息包含两项数据：一个用以指定被调用方法的`动作`选择器；一个接收消息的对象，即`目标`。事件发生时发送的消息称为`动作消息`。尽管`目标`可以是任意对象，甚至是框架对象，通常是指定自定义控制器作为处理`动作消息`的`目标`。

![](http://7xlpnu.com1.z0.glb.clouddn.com/blog-target_action.jpg)

任意事件都可以触发`动作消息`，就如任意对象都可以发送消息。例如，当自身的手势被识别时，一个手势识别对象
可以发送一条`动作消息`给另一对象，在按钮和滑动条等控件中有很多目标-动作模式的典型应用。

## 动作方法的格式必须是确定的
动作方法必须有约定的签名。UIKit框架兼容一些签名的变种，但是两个平台（哪两个）都接受类似如下签名的动作方法：

```objective-c
- (IBAction)doSomething:(id)sender;
```

IBAction类型修饰符，等同于返回类型void，它声明此方法是一个`动作`，供Interface Builder(下简称IB)识别。要让动作方法在IB中显示，必须先在接收动作消息的对象类的头文件中声明它。

参数`sender`代表发送`动作消息`的控件对象。当响应动作消息时，可以通过'sender'获得相应事件的上下文信息。

## 可以通过编码或者工具设置目标和动作

可以通过编码或者IB设置控件（或控件单元）对象的目标和动作。编码设置相关属性使控件和它的目标通过动作建立连接。如果是在IB中设置控件及其目标，连接信息会保存到一个nib文件。当应用程序加载nib文件时，连接信息还原到应用中。

可以将动作消息的目标设置为'nil'，这样的话目标在应用程序运行时确定；应用会首先将动作消息发给'第一响应对象'并从此在响应对象链中冒泡，直到被处理。

## 目标-动作模式在iOs和OS X系统中是不同的

尽管此设计模式在两个系统中的概念是一致的，UIKit和AppKit实现的方式却是不同的。

+ UIKit中，一个控件将目标和动作映射到它所支持的一个或多个多点触控事件上。
+ UIKit允许多种签名不同的动作方法，如下：

```objective-c
- (IBAction)action:(id)sender forEvent:(UIEvent *)event
```

+
AppKit中大多数控件使用控件-单元的结构来实现目标-动作模式。该结构中，一个控件拥有一个或多个更轻量的单元对象并且这些单元持有该控件的目标和动作属性。当用户点击或激活一个控件，控件从单元中提取目标和动作信息，将动作消息发送给目标。
